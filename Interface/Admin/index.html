<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet" href="https://unpkg.com/@mdi/font@6.x/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vuetify@2.6.10/dist/vuetify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js"></script>
    <script src="https://unpkg.com/babel-polyfill/dist/polyfill.min.js"></script>
    <script src="https://unpkg.com/vuetify@2.6.10/dist/vuetify.min.js"></script>
</head>
<body>
    <v-app id="app">
        <v-container fill-height v-show="!login">
            <v-row justify="center" align-items="center">
              <v-col cols="10" sm="5">
                <v-card width="448" height="500" elevation="8" outlined >
                    <v-card-text>
                     <img src="../../Documentació/logo_pr1er.png" style="width: 160px; height: 160px; border: 2px solid black; border-radius: 50%; display: block; margin: auto;" ></img>
                      <v-text-field id="user" style="margin-top: 35px;" outlined label="User" append-icon="mdi-account"></v-text-field>
                      <v-text-field 
                        id ="pass"
                        outlined 
                        :type ="showPassword ? 'text' : 'password'" 
                        label = "Password" 
                        :append-icon="showPassword ? 'mdi-eye' : 'mdi-eye-off'" 
                        @click:append="showPassword = !showPassword">
                     </v-text-field>
                     <v-card-text class="mt-n3">{{err}}</v-card-text>
                    <v-btn @click ="getAdmins" class="" color="primary">Sign In</v-btn>
                    </v-card-text>
                </v-col>
            </v-row>
        </v-container>

        <v-container fill-height v-show ="login">
            <v-row justify="center" align="center">
            <v-col cols="14">
                <template >
                    <v-card class="elevation-10" style="border: 1px solid black;" >
                      <v-card-title center>USERS</v-card-title>
                      <v-card-title>
                        <v-text-field
                          v-model="search"
                          append-icon="mdi-magnify"
                          label="Search"
                          single-line
                          hide-details
                          
                        ></v-text-field>
                      </v-card-title>
                      <v-data-table
                    
                        :headers="headers"
                        :items="users"
                        :search="search"
                        >

                        <template v-slot:item="row">
                          <tr>
                            <td>{{row.item.nom}}</td>
                            <td>{{row.item.cognoms}}</td>
                            <td>{{row.item.data_naixament}}</td>
                            <td>{{row.item.email}}</td>
                            <td>{{row.item.ubicacio}}</td>
                            <td>{{row.item.pass}}</td>
                            <td>{{row.item.rol}}</td>
                            <td>
                              <v-dialog
                              transition="dialog-top-transition"
                              max-width="600"
                            >
                              <template v-slot:activator="{ on, attrs }">
                                <v-btn
                                  color="primary"
                                  v-bind="attrs"
                                  v-on="on"
                                  @click="seeUsers(row.item.email)"
                                ><v-icon>mdi-account</v-icon></v-btn>
                              </template>
                              <template v-show="!dialog" v-slot:default="dialog">
                                <v-card>
                                  <v-toolbar
                                    color="primary"
                                    dark
                                  >Información del usuario: {{seeUs.nom}}</v-toolbar>
                                  <v-container fill-height>
                                    <v-row justify="center" align="center">
                                      <v-col cols="14">
                                  
                                      <v-img :src=img style="width: 120px; height: 120px; border: 2px solid black; border-radius: 50%;" ></v-img>
                                          <v-card-title class="font-weight-regular" >USER -> {{seeUs.user}} </v-card-title>
                                          <v-card-title class="font-weight-regular">NOM -> {{seeUs.nom}}</v-card-title>
                                          <v-card-title class="font-weight-regular">COGNOMS -> {{seeUs.cognoms}}:</v-card-title>
                                          <v-card-title class="font-weight-regular">UBICACIO -> {{seeUs.ubicacio}}</v-card-title>
                                          <v-card-title class="font-weight-regular">EMAIL -> {{seeUs.email}}</v-card-title>
                                          <v-card-title class="font-weight-regular">PASS -> {{seeUs.pass}}</v-card-title>
                                          <v-card-title class="font-weight-regular">DESCRIPCIO -> {{seeUs.descripcio}}</v-card-title>
                                          <v-card-title class="font-weight-regular">EDAD -> {{seeUs.data_naixament}}</v-card-title>
                                          <v-card-title class="font-weight-regular">ROL -> {{seeUs.rol}}</v-card-title>
                                    </v-col>
                                    </v-row>
                                  </v-container>
                                  <v-card-actions class="justify-end">
                                    <v-btn
                                      @click="dialog.value = false"
                                    >Close</v-btn>
                                  </v-card-actions>
                                </v-card>
                              </template>
                            </v-dialog>
                            </td>
                            <td>
                              <v-btn color="primary" @click="ferAdmin(row.item.email, row.item.rol)">Admin/User</v-btn>
                            </td>
                          </tr>
                      </template>
                    </v-data-table>
                    </v-card>
                  </template>
            </v-col>
        </v-container>
        <script src="index.js"></script>
    </v-app>
    <script>app.getUsers()</script>
</body>
</html>